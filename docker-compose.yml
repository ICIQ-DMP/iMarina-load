services:
  app:
    image: mariopique/imarina-load:latest
    build: .
    container_name: iMarina_docker
    volumes:
    - ./input:/app/input
    - ./output:/app/output
    - ./uploads:/app/uploads

    secrets:
      - FTP_HOST
      - FTP_PASSWORD
      - FTP_PORT
      - FTP_USER
    stdin_open: true
    tty: true
    command: >
      sh -c "python /app/src/main.py --imarina-input /app/input/iMarina.xlsx --a3-input /app/input/A3.xlsx --countries-dict /app/input/countries.xlsx --jobs-dict /app/input/Job_Descriptions.xlsx --step build"

secrets:
  FTP_HOST:
    file: ./secrets/FTP_HOST
  FTP_PASSWORD:
    file: ./secrets/FTP_PASSWORD
  FTP_PORT:
    file: ./secrets/FTP_PORT
  FTP_USER:
    file: ./secrets/FTP_USER


